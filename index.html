<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <title>간단한 지도 표시하기</title>
        <script
            type="text/javascript"
            src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=uzlzuhd2pa&submodules=panorama"></script>
        <script
            src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="map" style="width:100%;height:400px;"></div>
        <div id="pano" style="width:100%;height:400px;"></div>
        <script>
            var map = new naver
                .maps
                .Map('map', {
                    center: new naver
                        .maps
                        .LatLng(37.3599605, 127.1058814),
                    zoom: 17
                });

            var pano = null;
            naver.maps.onJSContentLoaded = function () {
                // 아이디 혹은 지도 좌표로 파노라마를 표시할 수 있습니다.
                pano = new naver
                    .maps
                    .Panorama("pano", {
                        position: new naver
                            .maps
                            .LatLng(37.3599605, 127.1058814),
                        pov: {
                            pan: -133,
                            tilt: 0,
                            fov: 100
                        }
                    });

                // 파노라마 위치가 갱신되었을 때 발생하는 이벤트를 받아 지도의 중심 위치를 갱신합니다.
                naver
                    .maps
                    .Event
                    .addListener(pano, 'pano_changed', function () {
                        var latlng = pano.getPosition();

                        if (!latlng.equals(map.getCenter())) {
                            map.setCenter(latlng);
                        }
                    });
            };

            // 거리뷰 레이어를 생성합니다.
            var streetLayer = new naver
                .maps
                .StreetLayer();
            naver
                .maps
                .Event
                .once(map, 'init_stylemap', function () {
                    streetLayer.setMap(map);
                });

            // 거리뷰 버튼에 이벤트를 바인딩합니다.
            var btn = $('#street');
            btn.on("click", function (e) {
                e.preventDefault();

                // 거리뷰 레이어가 지도 위에 있으면 거리뷰 레이어를 지도에서 제거하고, 거리뷰 레이어가 지도 위에 없으면 거리뷰 레이어를 지도에 추가합니다.
                if (streetLayer.getMap()) {
                    streetLayer.setMap(null);
                } else {
                    streetLayer.setMap(map);
                }
            });

            // 거리뷰 레이어가 변경되면 발생하는 이벤트를 지도로부터 받아 버튼의 상태를 변경합니다.
            naver
                .maps
                .Event
                .addListener(map, 'streetLayer_changed', function (streetLayer) {
                    if (streetLayer) {
                        btn.addClass('control-on');
                    } else {
                        btn.removeClass('control-on');
                    }
                });

            // 지도를 클릭했을 때 발생하는 이벤트를 받아 파노라마 위치를 갱신합니다. 이때 거리뷰 레이어가 있을 때만 갱신하도록 합니다.
            naver
                .maps
                .Event
                .addListener(map, 'click', async (e) => {
                    if (streetLayer.getMap()) {
                        // var latlng = e.coord; var latlng = [127.08561718447129, 37.51179418826833];
                        const arr = [
                            [
                                127.0855259, 37.5118313
                            ],
                            [
                                127.0855352, 37.5117926
                            ],
                            [
                                127.0855492, 37.5117106
                            ],
                            [
                                127.0855874, 37.5115548
                            ],
                            [
                                127.0858941, 37.5115361
                            ],
                            [
                                127.0860469, 37.5115303
                            ],
                            [
                                127.0874084, 37.5114729
                            ],
                            [
                                127.0875759, 37.5114663
                            ],
                            [
                                127.0881271, 37.5114502
                            ],
                            [
                                127.0881689, 37.5114494
                            ],
                            [
                                127.0884111, 37.5114475
                            ],
                            [
                                127.0886216, 37.5114474
                            ],
                            [
                                127.0888704, 37.5114627
                            ],
                            [
                                127.0919171, 37.5117635
                            ],
                            [
                                127.0919985, 37.5117710
                            ],
                            [
                                127.0921500, 37.5117859
                            ],
                            [
                                127.0922292, 37.5117934
                            ],
                            [
                                127.0923536, 37.5118046
                            ],
                            [
                                127.0924464, 37.5118122
                            ],
                            [
                                127.0924871, 37.5118150
                            ],
                            [
                                127.0925674, 37.5118216
                            ],
                            [
                                127.0928953, 37.5118561
                            ],
                            [
                                127.0930163, 37.5118691
                            ],
                            [
                                127.0932176, 37.5118941
                            ],
                            [
                                127.0933657, 37.5119127
                            ],
                            [
                                127.0945725, 37.5120232
                            ],
                            [
                                127.0947738, 37.5120473
                            ],
                            [
                                127.0955371, 37.5121247
                            ],
                            [
                                127.0961059, 37.5121934
                            ],
                            [
                                127.0963659, 37.5122375
                            ],
                            [
                                127.0968937, 37.5123619
                            ],
                            [
                                127.0976010, 37.5125590
                            ],
                            [
                                127.0982304, 37.5127189
                            ],
                            [
                                127.0988948, 37.5128870
                            ],
                            [
                                127.0992870, 37.5129776
                            ],
                            [
                                127.0999762, 37.5131584
                            ],
                            [
                                127.1000214, 37.5131703
                            ],
                            [
                                127.0999599, 37.5134630
                            ],
                            [
                                127.0993890, 37.5142173
                            ],
                            [
                                127.0992021, 37.5144501
                            ],
                            [
                                127.0990290, 37.5146650
                            ],
                            [
                                127.0983774, 37.5154767
                            ],
                            [
                                127.0983135, 37.5155747
                            ],
                            [
                                127.0979887, 37.5160089
                            ],
                            [
                                127.0977891, 37.5163030
                            ],
                            [
                                127.0977720, 37.5163264
                            ],
                            [
                                127.0977492, 37.5163579
                            ],
                            [
                                127.0977842, 37.5167915
                            ],
                            [
                                127.0977739, 37.5168176
                            ],
                            [
                                127.0976916, 37.5169625
                            ],
                            [
                                127.0963495, 37.5188661
                            ],
                            [
                                127.0963000, 37.5190164
                            ],
                            [
                                127.0962993, 37.5191408
                            ],
                            [
                                127.0963405, 37.5192699
                            ],
                            [
                                127.0964099, 37.5194035
                            ],
                            [
                                127.0965122, 37.5195327
                            ],
                            [
                                127.0967240, 37.5197083
                            ],
                            [
                                127.0978870, 37.5204081
                            ],
                            [
                                127.0983373, 37.5206413
                            ],
                            [
                                127.0988246, 37.5209242
                            ],
                            [
                                127.0991866, 37.5211580
                            ],
                            [
                                127.0994494, 37.5213247
                            ],
                            [
                                127.0998869, 37.5216327
                            ],
                            [
                                127.1003229, 37.5219920
                            ],
                            [
                                127.1005741, 37.5222082
                            ],
                            [
                                127.1013739, 37.5226914
                            ],
                            [
                                127.1020371, 37.5231082
                            ],
                            [
                                127.1022515, 37.5232324
                            ],
                            [
                                127.1023248, 37.5232742
                            ],
                            [
                                127.1024636, 37.5233539
                            ],
                            [
                                127.1024997, 37.5233748
                            ],
                            [
                                127.1051995, 37.5255994
                            ],
                            [
                                127.1060971, 37.5264316
                            ],
                            [
                                127.1064812, 37.5267880
                            ],
                            [
                                127.1070599, 37.5273578
                            ],
                            [
                                127.1072750, 37.5275695
                            ],
                            [
                                127.1076870, 37.5279827
                            ],
                            [
                                127.1081497, 37.5284467
                            ],
                            [
                                127.1081678, 37.5284657
                            ],
                            [
                                127.1087172, 37.5290164
                            ],
                            [
                                127.1090493, 37.5293582
                            ],
                            [
                                127.1095615, 37.5298881
                            ],
                            [
                                127.1096785, 37.5300201
                            ],
                            [
                                127.1097863, 37.5301728
                            ],
                            [
                                127.1098512, 37.5303244
                            ],
                            [
                                127.1099215, 37.5305094
                            ],
                            [
                                127.1099923, 37.5308324
                            ],
                            [
                                127.1100616, 37.5312103
                            ],
                            [
                                127.1100842, 37.5316556
                            ],
                            [
                                127.1101364, 37.5320659
                            ],
                            [
                                127.1102372, 37.5327080
                            ],
                            [
                                127.1102504, 37.5327874
                            ],
                            [
                                127.1102997, 37.5330913
                            ],
                            [
                                127.1104243, 37.5335081
                            ],
                            [
                                127.1106747, 37.5341074
                            ],
                            [
                                127.1108991, 37.5344994
                            ],
                            [
                                127.1112239, 37.5349331
                            ],
                            [
                                127.1114242, 37.5351663
                            ],
                            [
                                127.1116741, 37.5354249
                            ],
                            [
                                127.1119581, 37.5356728
                            ],
                            [
                                127.1126997, 37.5362828
                            ],
                            [
                                127.1137051, 37.5371045
                            ],
                            [
                                127.1140534, 37.5373895
                            ],
                            [
                                127.1145491, 37.5378500
                            ],
                            [
                                127.1168756, 37.5397405
                            ],
                            [
                                127.1174618, 37.5402165
                            ],
                            [
                                127.1180646, 37.5407710
                            ],
                            [
                                127.1182854, 37.5409736
                            ],
                            [
                                127.1185603, 37.5412268
                            ],
                            [
                                127.1191591, 37.5419084
                            ],
                            [
                                127.1197000, 37.5426078
                            ],
                            [
                                127.1198495, 37.5428246
                            ],
                            [
                                127.1201970, 37.5434954
                            ],
                            [
                                127.1208371, 37.5447332
                            ],
                            [
                                127.1211965, 37.5455123
                            ],
                            [
                                127.1217239, 37.5466578
                            ],
                            [
                                127.1226257, 37.5492124
                            ],
                            [
                                127.1226391, 37.5492494
                            ],
                            [
                                127.1230242, 37.5503394
                            ],
                            [
                                127.1237494, 37.5524581
                            ],
                            [
                                127.1242779, 37.5538479
                            ],
                            [
                                127.1246869, 37.5549245
                            ],
                            [
                                127.1248738, 37.5553632
                            ],
                            [
                                127.1249991, 37.5556583
                            ],
                            [
                                127.1253069, 37.5563642
                            ],
                            [
                                127.1254748, 37.5567496
                            ],
                            [
                                127.1257364, 37.5571993
                            ],
                            [
                                127.1258868, 37.5574647
                            ],
                            [
                                127.1259866, 37.5576408
                            ],
                            [
                                127.1267619, 37.5588412
                            ],
                            [
                                127.1270598, 37.5592712
                            ],
                            [
                                127.1271374, 37.5593832
                            ],
                            [
                                127.1273400, 37.5596245
                            ],
                            [
                                127.1278228, 37.5602002
                            ],
                            [
                                127.1278994, 37.5602914
                            ],
                            [
                                127.1282867, 37.5607163
                            ],
                            [
                                127.1285234, 37.5609460
                            ],
                            [
                                127.1291229, 37.5615283
                            ],
                            [
                                127.1294373, 37.5618331
                            ],
                            [
                                127.1299660, 37.5622872
                            ],
                            [
                                127.1303257, 37.5625957
                            ],
                            [
                                127.1312559, 37.5633936
                            ],
                            [
                                127.1314741, 37.5634754
                            ],
                            [
                                127.1317450, 37.5636448
                            ],
                            [
                                127.1323984, 37.5640858
                            ],
                            [
                                127.1326557, 37.5642615
                            ],
                            [
                                127.1329787, 37.5644310
                            ],
                            [
                                127.1333797, 37.5646306
                            ],
                            [
                                127.1336252, 37.5646872
                            ],
                            [
                                127.1339857, 37.5648280
                            ],
                            [
                                127.1343306, 37.5649255
                            ],
                            [
                                127.1346124, 37.5649390
                            ],
                            [
                                127.1348583, 37.5649137
                            ],
                            [
                                127.1351281, 37.5648406
                            ],
                            [
                                127.1353903, 37.5647080
                            ],
                            [
                                127.1357234, 37.5644422
                            ],
                            [
                                127.1361703, 37.5640488
                            ],
                            [
                                127.1362442, 37.5639832
                            ],
                            [
                                127.1370457, 37.5633169
                            ],
                            [
                                127.1373874, 37.5631386
                            ],
                            [
                                127.1378512, 37.5627723
                            ],
                            [
                                127.1384887, 37.5622920
                            ],
                            [
                                127.1387614, 37.5621071
                            ],
                            [
                                127.1393518, 37.5617619
                            ],
                            [
                                127.1395698, 37.5616373
                            ],
                            [
                                127.1405315, 37.5610841
                            ],
                            [
                                127.1418439, 37.5603544
                            ],
                            [
                                127.1424886, 37.5600273
                            ],
                            [
                                127.1429799, 37.5598080
                            ],
                            [
                                127.1433662, 37.5595216
                            ],
                            [
                                127.1435346, 37.5593617
                            ],
                            [
                                127.1436347, 37.5592629
                            ],
                            [
                                127.1436745, 37.5592233
                            ],
                            [
                                127.1438919, 37.5589707
                            ],
                            [
                                127.1439865, 37.5588502
                            ],
                            [
                                127.1440799, 37.5587243
                            ],
                            [
                                127.1443033, 37.5584140
                            ],
                            [
                                127.1443159, 37.5583924
                            ],
                            [
                                127.1444311, 37.5582125
                            ],
                            [
                                127.1445477, 37.5579821
                            ],
                            [
                                127.1445614, 37.5579497
                            ],
                            [
                                127.1445947, 37.5578542
                            ],
                            [
                                127.1446533, 37.5576832
                            ],
                            [
                                127.1446879, 37.5575327
                            ],
                            [
                                127.1447193, 37.5573742
                            ],
                            [
                                127.1447318, 37.5571110
                            ],
                            [
                                127.1447280, 37.5569533
                            ],
                            [
                                127.1447087, 37.5567387
                            ],
                            [
                                127.1447034, 37.5566684
                            ],
                            [
                                127.1447001, 37.5566359
                            ],
                            [
                                127.1446793, 37.5564980
                            ],
                            [
                                127.1446002, 37.5559731
                            ],
                            [
                                127.1444599, 37.5550173
                            ],
                            [
                                127.1444489, 37.5549397
                            ],
                            [
                                127.1444489, 37.5549388
                            ],
                            [
                                127.1444228, 37.5547179
                            ],
                            [
                                127.1443987, 37.5545439
                            ],
                            [
                                127.1443648, 37.5542869
                            ],
                            [
                                127.1443298, 37.5540326
                            ],
                            [
                                127.1442985, 37.5537161
                            ],
                            [
                                127.1442909, 37.5536422
                            ],
                            [
                                127.1442493, 37.5533491
                            ],
                            [
                                127.1442329, 37.5532238
                            ],
                            [
                                127.1442329, 37.5532193
                            ],
                            [
                                127.1441892, 37.5528848
                            ],
                            [
                                127.1441739, 37.5527639
                            ],
                            [
                                127.1441587, 37.5526422
                            ],
                            [
                                127.1441140, 37.5522833
                            ],
                            [
                                127.1441030, 37.5522013
                            ],
                            [
                                127.1440861, 37.5519542
                            ],
                            [
                                127.1440861, 37.5519515
                            ],
                            [
                                127.1440819, 37.5518911
                            ],
                            [
                                127.1440542, 37.5515116
                            ],
                            [
                                127.1440198, 37.5511257
                            ],
                            [
                                127.1440003, 37.5509463
                            ],
                            [
                                127.1439806, 37.5508155
                            ],
                            [
                                127.1439564, 37.5506559
                            ],
                            [
                                127.1439189, 37.5504575
                            ],
                            [
                                127.1438979, 37.5503321
                            ],
                            [
                                127.1437953, 37.5497793
                            ],
                            [
                                127.1437931, 37.5497667
                            ],
                            [
                                127.1437809, 37.5497026
                            ],
                            [
                                127.1437116, 37.5492833
                            ],
                            [
                                127.1436489, 37.5489109
                            ],
                            [
                                127.1436037, 37.5486493
                            ],
                            [
                                127.1434561, 37.5477962
                            ],
                            [
                                127.1434328, 37.5476799
                            ],
                            [
                                127.1433206, 37.5469927
                            ],
                            [
                                127.1432390, 37.5465409
                            ],
                            [
                                127.1432127, 37.5463668
                            ],
                            [
                                127.1431534, 37.5462080
                            ],
                            [
                                127.1431344, 37.5461557
                            ],
                            [
                                127.1430708, 37.5459806
                            ],
                            [
                                127.1429936, 37.5457839
                            ],
                            [
                                127.1429600, 37.5456945
                            ]
                        ];
                        for (let index = 0; index < arr.length; index++) {
                            setTimeout(() => {
                                var latlng = arr[index];
                                console.log(latlng);

                                // 파노라마의 setPosition()은 해당 위치에서 가장 가까운 파노라마(검색 반경 300미터)를 자동으로 설정합니다.
                                pano.setPosition(latlng);
                            }, index * 1000)
                        }
                    }
                });
        </script>
    </body>
</html>